{% extends "base.html" %}

{% block title %}New ncr {% endblock %}

{% block content %}
<div class="card">
    <h2>‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏</h2>
    <p style="color: #666; margin-bottom: 30px;">–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç</p>
    
    <form method="POST" enctype="multipart/form-data">
        <h3 style="margin-bottom: 20px; color: #2c3e50;">üìã –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        
        <div class="form-group">
            <label for="NCR_Number">1. –ù–æ–º–µ—Ä NCR</label>
            <input type="text"
       name="NCR_Number"
       value="{{ generated_ncr_number }}"
       >
        </div>
        
        <div class="form-group">
            <label>2. –ü—Ä–æ–µ–∫—Ç</label>
            <select name="Project" class="form-select" required>
            <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Äî</option>
            <option value="–û—Å–≤–æ–µ–Ω–∏—è –º–µ—Å—Ç–æ—Ä–æ–∂–¥–µ–Ω–∏—è –ï—à–ª–∏–∫-1 
–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∫–æ–º–ø–ª–µ–∫—Å–∞ –º–µ–¥–Ω–æ-–æ–±–æ–≥–∞—Ç–∏—Ç–µ–ª—å–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∏ (–ú–û–§-3) —Å –ø–æ–ª–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º —Ü–∏–∫–ª–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞.–•–≤–æ—Å—Ç–æ–≤–æ–µ –•–æ–∑—è–π—Å—Ç–≤–æ –ö–∞—Ä—Ç–∞ ‚Ññ1
">–û—Å–≤–æ–µ–Ω–∏—è –º–µ—Å—Ç–æ—Ä–æ–∂–¥–µ–Ω–∏—è –ï—à–ª–∏–∫-1 
–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∫–æ–º–ø–ª–µ–∫—Å–∞ –º–µ–¥–Ω–æ-–æ–±–æ–≥–∞—Ç–∏—Ç–µ–ª—å–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–∏ (–ú–û–§-3) —Å –ø–æ–ª–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º —Ü–∏–∫–ª–æ–º –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞.–•–≤–æ—Å—Ç–æ–≤–æ–µ –•–æ–∑—è–π—Å—Ç–≤–æ –ö–∞—Ä—Ç–∞ ‚Ññ1
</option>
            
            <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
    </select>
</div>


        <div class="form-group">
            <label for="Discipline">3. –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ *</label>
            <select id="Discipline" name="Discipline" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É</option>
                <option value="CIV">CIV</option>
                <option value="ELE">ELE</option>
                <option value="PIP">PIP</option>
                <option value="CCTV">CCTV</option>
                <option value="INS">INS</option>
                <option value="STS">STS</option>
            </select>
        </div>

        <div class="form-group">
            <label for="Contractor">4. –ö–æ–º—É –≤—ã–¥–∞–Ω–æ</label>
            <input type="text"
       name="Contractor"
       value="{{ generated_contractor }}"
       >
        </div>
        <div class="form-group">
            <label for="technical_supervisor_company">5. –ö–µ–º –≤—ã–¥–∞–Ω–æ</label>
            <input type="text"
       name="technical_supervisor_company"
       value="{{ generated_technical_supervisor_company }}"
       >
        </div>
        
        <div class="form-group">
            <label for="major_object">6. –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ *</label>
            <select id="major_object" name="major_object" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç</option>
                <option value="–ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–π –ø—É–ª—å–ø–æ–≤–æ–¥ —Ö–≤–æ—Å—Ç–æ–≤ –∫–∞—Ä—Ç—ã 1">–ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–π –ø—É–ª—å–ø–æ–≤–æ–¥ —Ö–≤–æ—Å—Ç–æ–≤ –∫–∞—Ä—Ç—ã 1</option>
                <option value="–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø—É–ª—å–ø–æ–≤–æ–¥">–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø—É–ª—å–ø–æ–≤–æ–¥</option>
                <option value="–ü–ª–æ—â–∞–¥–∫–∞ –ø–æ–¥—Å—Ç–∞–Ω—Ü–∏–∏ –ì–ü–ü-1 110/10–∫–í. –ì–ü–ü-1 –ü–° 110/6 –∫–í - 2—Ö10000">–ü–ª–æ—â–∞–¥–∫–∞ –ø–æ–¥—Å—Ç–∞–Ω—Ü–∏–∏ –ì–ü–ü-1 110/10–∫–í. –ì–ü–ü-1 –ü–° 110/6 –∫–í - 2—Ö10000</option>
                <option value="–ü–∏–æ–Ω–µ—Ä–Ω–∞—è –¥–∞–º–±–∞">–ü–∏–æ–Ω–µ—Ä–Ω–∞—è –¥–∞–º–±–∞</option>
                <option value="–£—á–∞—Å—Ç–æ–∫ –≤–æ–¥–æ–∑–∞–±–æ—Ä–∞">–£—á–∞—Å—Ç–æ–∫ –≤–æ–¥–æ–∑–∞–±–æ—Ä–∞</option>
                <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
            </select>
        </div>

        <div class="form-group">
            <label for="Draw_number">7. –ù–æ–º–µ—Ä —á–µ—Ä—Ç–µ–∂–∞</label>
            <input type="text" id="Draw_number" name="Draw_number" required
                   placeholder="–ù–æ–º–µ—Ä —á–µ—Ä—Ç–µ–∂–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–µ–≥–æ —É—á–∞—Å—Ç–∫—É ">
        </div>

        <div class="form-group">
            <label for="Location">8. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤ / —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ / —É—á–∞—Å—Ç–æ–∫</label>
            <input type="text" id="Location" name="Location" required
                   placeholder="–§—É–Ω–¥–∞–º–µ–Ω—Ç –§–ú-2,–°–µ–≤–µ—Ä–Ω–∞—è –¥–∞–º–±–∞">
        </div>
        <div class="form-group">
            <label for="Procedure">9. –ü—Ä–æ—Ü–µ–¥—É—Ä–∞</label>
            <input type="text" id="Procedure" name="Procedure" required

                   placeholder="–ü—É–Ω–∫—Ç—ã –®–ù–ö/–ü–ü–† ">
        </div>


        <div class="form-group">
            <label for="NCR_Description">10. –û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å–≤–∏—è</label>
            <textarea name="NCR_Description" rows="4" required></textarea
                   placeholder="–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å–≤–∏—è">
        </div>
        <div class="form-group">
            <label for="NCR_grade">11. –û—Ü–µ–Ω–∫–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å–≤–∏—è *</label>
            <select id="NCR_grade" name="NCR_grade" required>
                <option value="">–û—Ü–µ–Ω–∏—Ç–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å–≤–∏—è</option>
                <option value="–û—á–µ–Ω—å –≤–∞–∂–Ω—ã–π">–û—á–µ–Ω—å –≤–∞–∂–Ω—ã–π</option>
                <option value="–ù–µ–æ—Ç–ª–æ–∂–Ω—ã–π">–ù–µ–æ—Ç–ª–æ–∂–Ω—ã–π</option>
                <option value="–ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π">–ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π</option>
                <option value="–ù–µ—Å—Ä–æ—á–Ω—ã–π">–ù–µ—Å—Ä–æ—á–Ω—ã–π</option>
                <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
            </select>
        </div>   
        <div class="form-group">
            <label for="inspection_date">12. –î–∞—Ç–∞ –≤—ã–ø—É—Å–∫–∞ *</label>
            <input type="date" name="inspection_date" required>
        </div>
        
        <div class="form-group">
             <label for="Correction_acts">13. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ü–æ–¥—Ä—è–¥—á–∏–∫–∞</label>
            <textarea name="Correction_acts" rows="4" required></textarea>
        </div>

        <div class="form-group">
            <label>14. –°—Ä–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è *</label>
            <input type="date" id="closed_date.plan" name="closed_date.plan">

        </div>           
        
        <div class="form-group">
            <label for="Measures">15. –ú–µ—Ä—ã *</label>
            <select id="Measures" name="Measures" required>
                <option value="–î–æ—Ä–∞–±–æ—Ç–∫–∞">–î–æ—Ä–∞–±–æ—Ç–∫–∞</option>
                <option value="–†–µ–º–æ–Ω—Ç">–†–µ–º–æ–Ω—Ç</option>
                <option value="–û—Ç–±—Ä–∞–∫–æ–≤–∞—Ç—å">–û—Ç–±—Ä–∞–∫–æ–≤–∞—Ç—å</option>
                <option value="–û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å">–û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å</option>
                <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
            </select>
        </div>  

        
        
        <div class="form-group">
            <label for="inspector_name_field">16. –§–ò–û –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞</label>
            <input type="text" id="inspector_name_field" name="inspector_name_field" 
                   value="{{ session.full_name }}"
                   placeholder="–§–ò–û –ø—Ä–æ–≤–æ–¥—è—â–µ–≥–æ –∏–Ω—Å–ø–µ–∫—Ü–∏—é">
        </div>
        
        <div class="form-group">
            <label for="NCR_Status">17. –°—Ç–∞—Ç—É—Å NCR</label>
            <select id="NCR_Status" name="NCR_Status">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å</option>
                <option value="–ó–∞–∫—Ä—ã—Ç–æ">‚úÖ –ó–∞–∫—Ä—ã—Ç–æ</option>
                <option value="–û—Ç–∫—Ä—ã—Ç–æ" selected>‚ö† –û—Ç–∫—Ä—ã—Ç–æ</option>
                <option value="–ü—Ä–∏–Ω—è—Ç–æ —Å –∑–∞–º–µ—á–∞–Ω–∏—è–º–∏">‚ö†Ô∏è –ü—Ä–∏–Ω—è—Ç–æ —Å –∑–∞–º–µ—á–∞–Ω–∏—è–º–∏</option>
                <option value="–û—Ç–∫–ª–æ–Ω–µ–Ω–æ">‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–æ</option>
                <option value="–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏">üîß –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏</option>
                <option value="–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏">‚è≥ –ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</option>
            </select>
        </div>
        
       <hr>

       <h3 style="margin-top: 30px;">üì∑ –§–æ—Ç–æ –æ—Ç—á–µ—Ç</h3>

       <div class="form-group">
            <label> </label>
           <input type="file"
           name="photos"
           accept="image/*"
           multiple
           class="form-control">
    <small style="color: #666;">
        –î–æ–ø—É—Å—Ç–∏–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG
    </small>
</div>

        
        <div style="display: flex; gap: 15px; margin-top: 30px;">
            <button type="submit" class="btn btn-geodetic" style="flex: 1;">
                ‚úÖ –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç –æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏
            </button>
            <a href="/choose_type" class="btn btn-danger" style="flex: 0 0 200px;">
                ‚ùå –û—Ç–º–µ–Ω–∞
            </a>
        </div>
    </form>
</div>

<script>
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const year = now.getFullYear();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const day = String(now.getDate()).padStart(2, '0');
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    
    const currentDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;
    document.getElementById('inspection_date').value = `${year}-${month}-${day}`;
});
</script>
{% endblock %}